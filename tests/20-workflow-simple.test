# prepare it (2 tests)
  git init
>>>=0
it init
>>>=0

#03: add a ticket
it new > ,new
<<<
new ticket
feature
2
8
1.0
>>>=0

# get new ticket id
  cat ,new |sed -r "s/.*'(.*)'.*/\1/" > ,ticket-sha7
>>>=0

#05: check ticket title (fixed by bc8861b)
it show $(cat ,ticket-sha7)
>>>/^Subject: new ticket$/
>>>=0

# setup EDITOR to add a body text
  git config core.editor "sed -i -f $PKGPATH/tests/data/20-edit-cmd.sed"
>>>=0

#07: edit the ticket
it edit $(cat ,ticket-sha7)
>>>=0

#08: check for the new body
it show $(cat ,ticket-sha7)
>>>/^The Body\.$/
>>>=0

# take the ticket as "Mark Bench <bench@mark.org>"
  git config user.name "Mark Bench"
>>>=0
  git config user.email "bench@mark.org"
>>>=0

#11: take this ticket
it take $(cat ,ticket-sha7)
>>>=0

#12: check for assigned person
it show $(cat ,ticket-sha7)
>>>/^Assigned_to: Mark Bench$/
>>>=0

#13: leave this ticket
it leave $(cat ,ticket-sha7)
>>>=0

#14: check for the assignee
it show $(cat ,ticket-sha7)
>>>/^Assigned_to: -$/
>>>=0

#15: move the ticket to the new release 'sometime'
it mv $(cat ,ticket-sha7) sometime
>>>2
>>>=0

#16: check for the new body
it show $(cat ,ticket-sha7) | grep Release
>>>/^Release: sometime$/
>>>=0

#17: test 'list' command for new ticket
#it list
it list | grep "$(cat ,ticket-sha7)"
>>>/^[0-9a-f][0-9a-f]+ *feature *new ticket *major *open /
>>>=0

#18: change status to reject
it reject "$(cat ,ticket-sha7)"
>>>=0

#19: check for status change
it show $(cat ,ticket-sha7) | grep Status:
>>>
Status: rejected
>>>=0

#20: change status to reopen
it reopen "$(cat ,ticket-sha7)"
>>>=0

#21: check for status change
it show $(cat ,ticket-sha7) | grep Status:
>>>
Status: open
>>>=0

#22: change status to test
it test "$(cat ,ticket-sha7)"
>>>=0

#23: check for status change
it show $(cat ,ticket-sha7) | grep Status:
>>>
Status: test
>>>=0

#24: change status to fix
it fix "$(cat ,ticket-sha7)"
>>>=0

#25: check for status change
it show $(cat ,ticket-sha7) | grep Status:
>>>
Status: fixed
>>>=0

#26: change status to reopen
it reopen "$(cat ,ticket-sha7)"
>>>=0

#27: check for status change
it show $(cat ,ticket-sha7) | grep Status:
>>>
Status: open
>>>=0

#28: change status to close
it close "$(cat ,ticket-sha7)"
>>>=0

#29: check for status change
it show $(cat ,ticket-sha7) | grep Status:
>>>
Status: closed
>>>=0

#30: remove ticket
echo | it rm -f  $(cat ,ticket-sha7)
>>>/^ticket.*removed$/
>>>=0

#31: check ticket is removed
it show $(cat ,ticket-sha7)
>>>
>>>2
No such ticket.
>>>=1


#EOF
